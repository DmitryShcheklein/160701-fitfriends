# Проект «Fit-Friends»

FitFriends — это онлайн площадка для поиска тренировок. Сайт предлагает широкий выбор фитнес-тренировок для людей любого уровня подготовки, разных направлений. На сайте доступен личный кабинет пользователя, возможность индивидуального подбора тренировок, возможность покупки тренировок и отслеживания прогресса.

## Содержание

- [Запуск проекта](#запуск-проекта)
- [Переменные окружения](#переменные-окружения)
- [Сценарии](#сценарии)
- [Наполнение](#seed)

## Запуск проекта

### Установка и настройка окружения

1. Перейдите в папку `project`
2. Выполните установку пакетов командой `npm i`
3. Перейдите в папку `project/apps/backend/`
4. Создайте файл `.env` и скопируйте в него содержимое файла `.env-example`
5. Выполните запуск docker образов командой `docker compose up -d`
6. Выполните команду `nx run backend:db:seed` для начального наполнения базы данных **При каждом запуске команды таблицы предварительно очищаются!**
7. Всё готово, переходите к запуску проекта

### Запуск Backend

1. Перейдите в папку `project`
2. Выполните команду `npx nx run backend:serve`

Swagger проекта доступен по адресу `http://localhost:{env.PORT}/spec`

### Запуск Frontend

1. Перейдите в папку `project`
2. Выполните команду `npx nx run frontend:serve`

## Переменные окружения

По адресу `project/apps/backend/` расположен файл`.env-example`. Он содержит список всех переменных окружения, необходимых для работы приложения.

```ini
# Настройки порта, на котором будет запущен сервер
PORT=3333

# Настройки для подключения к базе данных MongoDB
MONGO_DB=fitfriends         # Имя базы данных
MONGO_HOST=localhost         # Хост MongoDB
MONGO_PORT=27017             # Порт MongoDB
MONGO_USER=admin             # Имя пользователя MongoDB
MONGO_PASSWORD=test          # Пароль пользователя MongoDB
MONGO_UI_PORT=8085           # Порт для веб-интерфейса MongoDB
MONGO_AUTH_BASE=admin        # База данных для аутентификации MongoDB

# Настройки для JWT-токенов (JSON Web Tokens)
JWT_ACCESS_TOKEN_SECRET=secret                  # Секретный ключ для создания и проверки JWT-токенов доступа
JWT_ACCESS_TOKEN_EXPIRES_IN=15m                 # Время жизни JWT-токенов доступа
JWT_REFRESH_TOKEN_SECRET=mysecret               # Секретный ключ для создания и проверки JWT-токенов обновления
JWT_REFRESH_TOKEN_EXPIRES_IN=7d               # Время жизни JWT-токенов обновления

# Настройки путей для загрузки файлов и статических ресурсов
UPLOAD_DIRECTORY_PATH=apps/backend/uploads   # Путь к директории для загрузки файлов
SERVE_ROOT=static                            # Корневая директория для обслуживания статических ресурсов
```

## Сценарии

Доступные в `apps/backend/project.json`

```json
    "db:seed": {
      "dependsOn": ["build"],
      "executor": "nx:run-commands",
      "options": {
        "command": "NODE_ENV=production node ./seeder.js",
        "cwd": "dist/apps/backend/"
      }
    }
```

## SEED

Во время подготовки тестовых данных автоматически создаётся пользователь — `admin@admin.ru` с паролем `adminnew`.

---

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨
